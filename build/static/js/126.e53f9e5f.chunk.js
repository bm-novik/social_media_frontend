"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[126],{3126:function(n,t,e){e.r(t),e.d(t,{default:function(){return P}});var i=e(2791),r=e(7468),o=e(3767),s=e(5542),a=e(7621),c=e(8105),l=e(9467),u=e(4796),d=e(8354),f=e(6984),h=e(8775),v=e(3044),p=e(5566),x=e(9585),g=e(6871),y=e(2455),m=e(1933),k=e(184),j=function(n){var t=n.id,e=n.first,i=n.last,r=n.nickName,o=n.image,s=n.text,a=(0,m.useQueryClient)(),c=(0,y.o1)((function(){a.invalidateQueries("useTopFive"),a.invalidateQueries("usePostFeedList")})).mutate,l=(0,g.s0)();return(0,k.jsx)(x.Z,{sx:{width:"37ch",underline:"none",backgroundColor:"transparent"},avatar:(0,k.jsx)(v.Z,{sx:{cursor:"pointer"},onClick:function(){return l("/".concat(t))},alt:e,src:o}),action:(0,k.jsx)(p.$Q,{style:{paddingTop:"2ch",backgroundColor:"transparent"},onClick:function(){return s?l("/".concat(t)):c({object_id:t})},children:s?"Profile":"Follow"}),title:(0,k.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return l("/".concat(t))},children:r}),subheader:(0,k.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){return l("/".concat(t))},children:[e," ",i]})})},b=e(2537),w=e(2169),C=e(2947),V=e(5128),_=e(9439),F=e(890),Z=e(3504),S=e(9504),O=e(8022),I=e(7758),M=function(n){var t=n.post,e=(0,i.useState)(null),r=(0,_.Z)(e,2),o=r[0],s=r[1],a=(0,i.useState)(!1),c=(0,_.Z)(a,2),l=c[0],u=c[1],d=function(n){var t=n.post;s(null===t||void 0===t?void 0:t.id),u(!l)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(O.P,{open:l,handleModalClick:d,post:o}),(0,k.jsxs)(S.Z,{sx:{paddingTop:"0.5ch",paddingBottom:2},children:[(0,k.jsx)(F.Z,{variant:"body2",color:"text.secondary",sx:{fontFamily:"Quicksand",fontSize:"1.85ch"},children:(0,k.jsxs)(p.sh,{variant:"text",color:"inherit",style:{background:"transparent",paddingLeft:"0px"},children:[t.like_count," likes"]})}),(0,k.jsxs)(F.Z,{variant:"body2",sx:{fontFamily:"Quicksand",fontSize:"1.85ch",color:"black"},children:[(0,k.jsxs)(Z.rU,{to:"/".concat(t.author.id),onClick:function(){return console.log("".concat(t.author.id))},style:{textDecoration:"none",cursor:"pointer",color:"inherit",fontWeight:600},children:[t.author.profile.first_name," "]}),t.content]}),(0,k.jsx)(F.Z,{variant:"body2",color:"text.secondary",sx:{},children:(0,k.jsxs)(p.DQ,{variant:"text",color:"inherit",style:{background:"transparent"},onClick:function(){return d({post:t})},children:["View all ",t.comment_count," comments"]})}),(0,k.jsx)(F.Z,{variant:"body2",sx:{fontFamily:"Quicksand",fontSize:"1.3ch",color:"MySecondary"},children:(0,I.K)(t.date_created)})]})]})},Q=e(2680),N=function(n){var t=n.post;return(0,k.jsxs)(a.Z,{sx:{maxWidth:"77ch",mb:5,marginRight:"10ch"},children:[(0,k.jsx)(C.m,{underline:"none",author:t.author}),(0,k.jsx)(w.Z,{onClick:function(){return console.log("post detail modal")},component:"img",height:"614",width:"614",image:t.image,alt:""}),(0,k.jsx)(Q.v,{post:t}),(0,k.jsx)(M,{post:t}),(0,k.jsx)(V.G,{post:t})]})},P=function(){var n=(0,c.YD)(),t=n.ref,e=n.inView,v=(0,r.sJ)(u.gy);(0,i.useEffect)((function(){e&&y()}),[e]);var p=(0,h.s)().data,x=(0,l.yW)((function(n,t){var e;return null!==(e=t[t.length-1].data.next)&&void 0!==e?e:void 0})),g=x.data,y=x.fetchNextPage,m=x.isLoading,w=x.isFetching,C=x.isFetchingNextPage,V=x.hasNextPage;return(0,k.jsxs)(k.Fragment,{children:[(m||w)&&(0,k.jsx)(b.z,{}),(0,k.jsxs)(d.F7,{children:[(0,k.jsxs)(d.k7,{children:[null===g||void 0===g?void 0:g.pages.map((function(n,t){var e;return(0,k.jsx)(i.Fragment,{children:null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.results.map((function(n){return(0,k.jsx)(N,{sx:{"& .MuiTypography-root":{fontFamily:"QuickSand"}},post:n},n.id)}))},t)})),(0,k.jsx)("div",{children:(0,k.jsx)(s.Z,{sx:{display:"none"},ref:t,onClick:function(){return y()},disabled:!V||C})})]}),(0,k.jsx)(a.Z,{sx:{display:"flex",backgroundColor:"transparent",top:"6.25ch",boxShadow:"none",position:"sticky"},children:(0,k.jsxs)(o.Z,{sx:{position:"fixed"},children:[(0,k.jsx)(j,{id:v.profileId,first:v.firstName,last:v.lastName,nickName:v.nickname,image:v.image,text:!0}),(0,k.jsx)(f.nx,{sx:{paddingLeft:"2.25ch"},children:"Suggestions For You"}),null===p||void 0===p?void 0:p.data.map((function(n){var t,e,i,r,o;return(0,k.jsx)(j,{id:null===n||void 0===n||null===(e=n.profile)||void 0===e?void 0:e.id,first:null===n||void 0===n||null===(i=n.profile)||void 0===i?void 0:i.first_name,nickName:null===n||void 0===n?void 0:n.username,last:null===n||void 0===n||null===(r=n.profile)||void 0===r?void 0:r.last_name,image:null===n||void 0===n||null===(o=n.profile)||void 0===o?void 0:o.profile_pic,text:!1},"profile".concat(null===n||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.id))}))]})})]})]})}},8105:function(n,t,e){e.d(t,{YD:function(){return v}});var i=e(2791);function r(){return r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},r.apply(this,arguments)}function o(n,t){return o=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},o(n,t)}var s=new Map,a=new WeakMap,c=0,l=void 0;function u(n){return Object.keys(n).sort().filter((function(t){return void 0!==n[t]})).map((function(t){return t+"_"+("root"===t?(e=n.root)?(a.has(e)||(c+=1,a.set(e,c.toString())),a.get(e)):"0":n[t]);var e})).toString()}function d(n,t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=l),"undefined"===typeof window.IntersectionObserver&&void 0!==i){var r=n.getBoundingClientRect();return t(i,{isIntersecting:i,target:n,intersectionRatio:"number"===typeof e.threshold?e.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var o=function(n){var t=u(n),e=s.get(t);if(!e){var i,r=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var e,o=t.isIntersecting&&i.some((function(n){return t.intersectionRatio>=n}));n.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(e=r.get(t.target))||e.forEach((function(n){n(o,t)}))}))}),n);i=o.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),e={id:t,observer:o,elements:r},s.set(t,e)}return e}(e),a=o.id,c=o.observer,d=o.elements,f=d.get(n)||[];return d.has(n)||d.set(n,f),f.push(t),c.observe(n),function(){f.splice(f.indexOf(t),1),0===f.length&&(d.delete(n),c.unobserve(n)),0===d.size&&(c.disconnect(),s.delete(a))}}var f=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function h(n){return"function"!==typeof n.children}i.Component;function v(n){var t=void 0===n?{}:n,e=t.threshold,r=t.delay,o=t.trackVisibility,s=t.rootMargin,a=t.root,c=t.triggerOnce,l=t.skip,u=t.initialInView,f=t.fallbackInView,h=t.onChange,v=i.useRef(),p=i.useRef(),x=i.useState({inView:!!u}),g=x[0],y=x[1];p.current=h;var m=i.useCallback((function(n){void 0!==v.current&&(v.current(),v.current=void 0),l||n&&(v.current=d(n,(function(n,t){y({inView:n,entry:t}),p.current&&p.current(n,t),t.isIntersecting&&c&&v.current&&(v.current(),v.current=void 0)}),{root:a,rootMargin:s,threshold:e,trackVisibility:o,delay:r},f))}),[Array.isArray(e)?e.toString():e,a,s,c,l,o,f,r]);i.useEffect((function(){v.current||!g.entry||c||l||y({inView:!!u})}));var k=[m,g.inView,g.entry];return k.ref=k[0],k.inView=k[1],k.entry=k[2],k}}}]);
//# sourceMappingURL=126.e53f9e5f.chunk.js.map